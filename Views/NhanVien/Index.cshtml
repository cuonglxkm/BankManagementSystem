@model IEnumerable<BankManagementSystem.Models.NhanVien>
@{
    ViewData["Title"] = "Danh sách Nhân Viên";
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success">@TempData["Success"]</div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<div class="card">
    <div class="card-header">
        <h1 style="font-size: 1.5rem;" class="card-title">Danh sách nhân viên</h1>
        <div class="card-tools">
            <a asp-action="Create" class="btn btn-primary btn-sm">Thêm mới</a>
        </div>
    </div>

    <div class="card-body">
        <table id="tblNhanVien" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Mã NV</th>
                    <th>Họ tên</th>
                    <th>Điện thoại</th>
                    <th>Email</th>
                    <th>Chức vụ</th>
                    <th>Chi nhánh</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#tblNhanVien').DataTable({
                processing: true,
                serverSide: true,
                filter: true,
                orderMulti: false,
                ajax: {
                    url: '/NhanVien/LoadData',
                    type: 'POST'
                },
                columns: [
                    { data: 'maNhanVien', name: "MaNhanVien" },
                    { data: 'hoTen', name: "HoTen" },
                    { data: 'dienThoai', name: "DienThoai" },
                    { data: 'email', name: "Email" },
                    { data: 'chucVu', name: "ChucVu" },
                    { data: 'chiNhanh', name: "ChiNhanh", orderable: false },
                    {
                        data: 'maNhanVien',
                        orderable: false,
                        render: function (data) {
                            return `
                                <a href="/NhanVien/Edit/${data}" class="btn btn-warning btn-sm">Sửa</a>
                                <a href="/NhanVien/Details/${data}" class="btn btn-info btn-sm">Chi tiết</a>
                                <a href="/NhanVien/Delete/${data}" class="btn btn-danger btn-sm">Xóa</a>
                            `;
                        }
                    }
                ],
                dom: 'Bfrtip', // MUST for buttons
                buttons: [
                    'pageLength',
                    {
                        extend: 'colvis',
                        text: 'Ẩn / hiện cột'
                    }
                ],
                colResize: {
                    handleWidth: 10,         // dễ kéo
                    resizeTable: true        // redraw table width
                },
                language: {
                    lengthMenu: "Hiện _MENU_ dòng",
                    search: "Tìm:",
                    paginate: { previous: "Trước", next: "Sau" },
                    zeroRecords: "Không có dữ liệu"
                },
                responsive: true,
                lengthChange: true,
                autoWidth: false,
            });
        });
    </script>
}